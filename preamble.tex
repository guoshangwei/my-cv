%! TEX root = cv.tex

% \usepackage[a-1b]{pdfx} % generate file which complaints PDF/A standard

\geometry{left=1.4cm, top=.8cm, right=1.4cm, bottom=1.8cm, footskip=.5cm}

\usepackage[
    style=ieee,
    eprint=false,
    doi=false,
    isbn=false,
    url=false,
    giveninits=true,
    dashed=false,
    maxbibnames=10,
]{biblatex}
\addbibresource{publications.bib}


% sort publication by date (descending) then name and title
\DeclareSortingTemplate{ddatent}{
    \sort{
        \field{presort}
    }
    \sort[final]{
        \field{sortkey}
    }
    \sort[direction=descending]{
        \field[strside=left,strwidth=4]{sortyear}
        \field[strside=left,strwidth=4]{year}
        \literal{9999}
    }
    \sort[direction=descending]{
        \field[padside=left,padwidth=2,padchar=0]{month}
        \literal{00}
    }
    \sort[direction=descending]{
        \field[padside=left,padwidth=2,padchar=0]{day}
        \literal{00}
    }
    \sort[direction=descending]{
        \field[padside=left,padwidth=4,padchar=0]{volume}
        \literal{9999}
    }
    \sort{
        \field{sortname}
        \field{author}
        \field{editor}
        \field{translator}
        \field{sorttitle}
        \field{title}
    }
    \sort{
        \field{sorttitle}
        \field{title}
    }
}

% highlight myself in the author list for publications
\renewcommand*{\mkbibnamegiven}[1]{\ifitemannotation{highlight}{\textbf{#1}}{#1}}
\renewcommand*{\mkbibnamefamily}[1]{\ifitemannotation{highlight}{\textbf{#1}}{#1}}

% move note to the end, and highlight it.
\DeclareSourcemap{
    \maps[datatype=bibtex]{
        \map{
            \step[fieldsource=note, final]
            \step[fieldset=addendum, origfieldval, final]
            \step[fieldset=note, null]
        }
    }
}
\DeclareFieldFormat{addendum}{\textbf{#1}}

% publication style
\renewcommand*{\bibfont}{\paragraphstyle}

% CV award
\newenvironment{cvawards}{%
    \vspace{\acvSectionContentTopSkip}
    \vspace{-2mm}
    \begin{center}
        \setlength\tabcolsep{0pt}
        \setlength{\extrarowheight}{0pt}
        \begin{tabular*}{\textwidth}{@{\extracolsep{\fill}} L{2cm} L{\textwidth - 2cm}}
            }{%
        \end{tabular*}
    \end{center}
}
% \cvaward{<title>}{<location>}{<date>}
\newcommand*{\cvaward}[3]{%
    \honordatestyle{#3} & \honortitlestyle{#1}, \honorlocationstyle{#2} \\
}

\colorlet{awesome}{awesome-red}
\setbool{acvSectionColorHighlight}{false}
